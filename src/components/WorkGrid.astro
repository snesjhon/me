---
import { workItems } from '../data/work';

// Language colors matching GitHub
const languageColors: Record<string, string> = {
  'TypeScript': '#3178c6',
  'JavaScript': '#f1e05a',
  'React': '#61dafb',
  'Python': '#3572A5',
  'Redux': '#764abc',
  'Wordpress': '#21759b',
};


// Get primary language from technologies array
const getPrimaryLanguage = (technologies: string[]) => {
  return technologies[0] || 'Code';
};
---

<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
  {workItems.map(item => {
    const primaryLang = getPrimaryLanguage(item.technologies);
    const langColor = languageColors[primaryLang] || '#959da5';

    return (
      <article class="bg-gh-canvas-default border border-gh-border-default rounded-md p-4">
        {/* Header */}
        <div class="flex items-start gap-3 mb-3">
          {/* Heroicon - Rectangle Stack (outline) */}
          <svg class="flex-shrink-0 w-4 h-4 text-gh-fg-muted mt-0.5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122" />
          </svg>

          <div class="flex-1 min-w-0">
            <a href="#" class="text-sm font-semibold m-0 text-gh-accent-fg hover:underline truncate block">
              {item.company}
            </a>
          </div>
        </div>

        {/* Description */}
        <p class="text-xs text-gh-fg-muted mb-4 leading-relaxed line-clamp-2">
          {item.description}
        </p>

        {/* Footer with language and stats */}
        <div class="flex items-center gap-4 text-xs text-gh-fg-muted">
          {/* Primary language */}
          <div class="flex items-center gap-1.5">
            <span
              class="w-3 h-3 rounded-full"
              style={`background-color: ${langColor}`}
            ></span>
            <span>{primaryLang}</span>
          </div>

          {/* Year/Period */}
          <span>{item.year}</span>
        </div>
      </article>
    );
  })}
</div>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
